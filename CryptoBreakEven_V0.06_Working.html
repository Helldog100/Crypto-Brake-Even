<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crypto Toolkit V0.07 (No Chart)</title>
  <meta name="theme-color" content="#0b3d91" />
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 10px;
      background-color: #f4f7f9;
      max-width: 500px;
      margin: auto;
    }
    nav {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
    }
    nav button {
      flex: 1;
      padding: 10px;
      margin: 0 5px;
      border: none;
      background-color: #0b3d91;
      color: white;
      font-weight: bold;
      border-radius: 6px;
    }
    .page { display: none; }
    .page.active { display: block; }
    select, input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .result {
      background: white;
      padding: 10px;
      margin-top: 15px;
      border-radius: 6px;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <nav>
    <button id="btnCalc">Calculator</button>
    <button id="btnPort">Portfolio</button>
    <button id="btnSim">Simulator</button>
  </nav>

  <section id="calc" class="page active">
    <h2>Break-Even Calculator</h2>
    <label>Coin</label>
    <select id="coinSelect">
      <option value="bitcoin">Bitcoin (BTC)</option>
      <option value="ethereum">Ethereum (ETH)</option>
      <option value="ripple">Ripple (XRP)</option>
      <option value="solana">Solana (SOL)</option>
      <option value="cardano">Cardano (ADA)</option>
      <option value="polygon">Polygon (MATIC)</option>
      <option value="litecoin">Litecoin (LTC)</option>
      <option value="chainlink">Chainlink (LINK)</option>
      <option value="pepe">Pepe (PEPE)</option>
      <option value="dogecoin">Dogecoin (DOGE)</option>
    </select>

    <label>Currency</label>
    <select id="currencySelect">
      <option value="usd">USD</option>
      <option value="gbp">GBP</option>
      <option value="eur">EUR</option>
    </select>

    <div class="result">Current Price: <span id="priceOutput">Loading...</span></div>

    <label>Platform</label>
    <select id="exchangeSelect">
      <option value="">Custom</option>
      <option value="crypto">Crypto.com</option>
      <option value="kraken">Kraken</option>
      <option value="binance">Binance</option>
      <option value="coinbase">Coinbase</option>
      <option value="kucoin">KuCoin</option>
      <option value="nexo">Nexo</option>
    </select>

    <label>Buy Price</label>
    <input type="number" id="buyPrice" step="0.0001" placeholder="e.g. 2.90" />
    <label>Maker Fee (%)</label>
    <input type="number" id="makerFee" step="0.001" value="0.25" />
    <label>Taker Fee (%)</label>
    <input type="number" id="takerFee" step="0.001" value="0.50" />
    <label>Desired Profit (%)</label>
    <input type="number" id="profitTarget" step="0.001" value="0" />

    <div class="result" id="marketResult"></div>
    <div class="result" id="limitResult"></div>
  </section>

  <section id="port" class="page">
    <h2>Portfolio Tracker (Coming Soon)</h2>
  </section>

  <section id="sim" class="page">
    <h2>Buy/Sell Simulator (Coming Soon)</h2>
  </section>

  <script>
    const pages = {
      calc: document.getElementById("calc"),
      port: document.getElementById("port"),
      sim: document.getElementById("sim")
    };

    const showPage = key => {
      for (const p in pages) pages[p].classList.remove("active");
      pages[key].classList.add("active");
    };

    document.getElementById("btnCalc").onclick = () => showPage("calc");
    document.getElementById("btnPort").onclick = () => showPage("port");
    document.getElementById("btnSim").onclick = () => showPage("sim");

    const coinSelect = document.getElementById("coinSelect");
    const currencySelect = document.getElementById("currencySelect");
    const priceOutput = document.getElementById("priceOutput");
    const buyInput = document.getElementById("buyPrice");
    const makerInput = document.getElementById("makerFee");
    const takerInput = document.getElementById("takerFee");
    const profitInput = document.getElementById("profitTarget");
    const marketResult = document.getElementById("marketResult");
    const limitResult = document.getElementById("limitResult");

    const exchangeFees = {
      crypto: { maker: 0.25, taker: 0.50 },
      kraken: { maker: 0.16, taker: 0.26 },
      binance: { maker: 0.10, taker: 0.10 },
      coinbase: { maker: 0.40, taker: 0.60 },
      kucoin: { maker: 0.10, taker: 0.10 },
      nexo: { maker: 0.00, taker: 0.50 }
    };

    document.getElementById("exchangeSelect").addEventListener("change", e => {
      const val = e.target.value;
      if (exchangeFees[val]) {
        makerInput.value = exchangeFees[val].maker;
        takerInput.value = exchangeFees[val].taker;
        calculate();
      }
    });

    function calculate() {
      const buy = parseFloat(buyInput.value);
      const maker = parseFloat(makerInput.value) / 100;
      const taker = parseFloat(takerInput.value) / 100;
      const profit = parseFloat(profitInput.value) / 100;
      const currency = currencySelect.value.toUpperCase();

      if (!buy || isNaN(buy)) {
        marketResult.textContent = '';
        limitResult.textContent = '';
        return;
      }

      const marketSell = ((buy * (1 + taker) * (1 + profit)) / (1 - taker)).toFixed(5);
      const limitSell = ((buy * (1 + maker) * (1 + profit)) / (1 - maker)).toFixed(5);

      marketResult.textContent = `Market Sell Price: ${currency} ${marketSell}`;
      limitResult.textContent = `Limit Sell Price: ${currency} ${limitSell}`;
    }

    buyInput.addEventListener("input", calculate);
    makerInput.addEventListener("input", calculate);
    takerInput.addEventListener("input", calculate);
    profitInput.addEventListener("input", calculate);

    async function updatePrice() {
      const coin = coinSelect.value;
      const currency = currencySelect.value;
      try {
        const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${coin}&vs_currencies=${currency}`);
        const data = await res.json();
        priceOutput.textContent = `${currency.toUpperCase()} ${data[coin][currency]}`;
      } catch (e) {
        priceOutput.textContent = "Error loading price";
      }
    }

    coinSelect.addEventListener("change", updatePrice);
    currencySelect.addEventListener("change", updatePrice);
    window.addEventListener("load", updatePrice);
  </script>
</body>
</html>
